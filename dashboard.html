<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GR Bank - Dashboard Avanzado</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" type="image/png" href="assets/isotipo light.png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Cargando tu dashboard...</p>
        </div>
    </div>

    <!-- Header -->
    <header class="header" id="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <img src="/assets/GR Bank.svg" alt="GR Bank Logo">
                </div>
                <ul class="nav-menu" id="navMenu">
                    <li class="nav-item"><a href="#dashboard" class="nav-link active">Dashboard</a></li>
                    <li class="nav-item"><a href="#cuentas" class="nav-link">Mis Cuentas</a></li>
                    <li class="nav-item"><a href="#tarjetas" class="nav-link">Tarjetas</a></li>
                    <li class="nav-item"><a href="#movimientos" class="nav-link">Movimientos</a></li>
                    <li class="nav-item"><a href="#servicios" class="nav-link">Servicios</a></li>
                </ul>
                <div class="nav-buttons">
                    <button class="theme-toggle" id="themeToggle">
                        <i class="fas fa-moon"></i>
                    </button>
                    <div class="user-profile">
                        <img src="https://svgsilh.com/svg/27716.svg?height=40&width=40" alt="Usuario" class="profile-img">
                        <span class="user-name">Juan Pérez</span>
                        <div class="dropdown-menu">
                            <a href="#perfil"><i class="fas fa-user"></i> Mi Perfil</a>
                            <a href="#configuracion"><i class="fas fa-cog"></i> Configuración</a>
                            <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</a>
                        </div>
                    </div>
                </div>
                <div class="hamburger" id="hamburger">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
        </nav>
    </header>

    <!-- Notification Toast -->
    <div id="toast" class="toast">
        <div class="toast-content">
            <i class="toast-icon"></i>
            <span class="toast-message"></span>
        </div>
        <button class="toast-close">&times;</button>
    </div>

    <!-- Main Dashboard -->
    <main class="main-content">
        <!-- Welcome Section -->
        <section class="welcome-section" data-aos="fade-up">
            <div class="container">
                <div class="welcome-content">
                    <div class="welcome-text">
                        <h1>¡Bienvenido de vuelta, <span class="user-highlight">Juan</span>!</h1>
                        <p class="welcome-subtitle">Aquí tienes un resumen de tu actividad financiera</p>
                        <div class="quick-actions">
                            <button class="quick-btn" onclick="openTransferModal()">
                                <i class="fas fa-exchange-alt"></i>
                                Transferir
                            </button>
                            <button class="quick-btn" onclick="openPaymentModal()">
                                <i class="fas fa-credit-card"></i>
                                Pagar
                            </button>
                            <button class="quick-btn" onclick="openDepositModal()">
                                <i class="fas fa-plus-circle"></i>
                                Depositar
                            </button>
                        </div>
                    </div>
                    <div class="welcome-stats">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-info">
                                <span class="stat-value" id="monthlyGrowth">+12.5%</span>
                                <span class="stat-label">Crecimiento mensual</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Balance Cards -->
        <section class="balance-section" data-aos="fade-up" data-aos-delay="100">
            <div class="container">
                <div class="balance-grid">
                    <div class="balance-card primary">
                        <div class="card-header">
                            <h3>Saldo Total</h3>
                            <button class="refresh-btn" onclick="refreshBalance()">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        <div class="balance-amount">
                            <span class="currency">$</span>
                            <span class="amount" id="saldoTotal">0</span>
                            <span class="currency-code">MXN</span>
                        </div>
                        <div class="balance-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span>+2.5% vs mes anterior</span>
                        </div>
                    </div>
                    
                    <div class="balance-card">
                        <div class="card-header">
                            <h3>Cuenta de Ahorros</h3>
                            <i class="fas fa-piggy-bank"></i>
                        </div>
                        <div class="balance-amount">
                            <span class="currency">$</span>
                            <span class="amount" id="saldoAhorros">0</span>
                        </div>
                        <div class="account-number">**** 1234</div>
                    </div>
                    
                    <div class="balance-card">
                        <div class="card-header">
                            <h3>Cuenta Corriente</h3>
                            <i class="fas fa-university"></i>
                        </div>
                        <div class="balance-amount">
                            <span class="currency">$</span>
                            <span class="amount" id="saldoCorriente">0</span>
                        </div>
                        <div class="account-number">**** 5678</div>
                    </div>
                    
                    <div class="balance-card">
                        <div class="card-header">
                            <h3>Tarjeta de Crédito</h3>
                            <i class="fas fa-credit-card"></i>
                        </div>
                        <div class="balance-amount">
                            <span class="currency">$</span>
                            <span class="amount credit" id="saldoCredito">0</span>
                        </div>
                        <div class="credit-limit">Límite: $50,000</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="charts-section" data-aos="fade-up" data-aos-delay="200">
            <div class="container">
                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Gastos por Categoría</h3>
                            <select id="expensesPeriod" onchange="updateExpensesChart()">
                                <option value="month">Este mes</option>
                                <option value="quarter">Trimestre</option>
                                <option value="year">Año</option>
                            </select>
                        </div>
                        <canvas id="expensesChart"></canvas>
                    </div>
                    
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Ingresos vs Gastos</h3>
                            <div class="chart-legend">
                                <span class="legend-item income">
                                    <span class="legend-color"></span>
                                    Ingresos
                                </span>
                                <span class="legend-item expenses">
                                    <span class="legend-color"></span>
                                    Gastos
                                </span>
                            </div>
                        </div>
                        <canvas id="incomeExpensesChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Recent Transactions -->
        <section class="transactions-section" data-aos="fade-up" data-aos-delay="300">
            <div class="container">
                <div class="section-header">
                    <h2>Movimientos Recientes</h2>
                    <div class="section-controls">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Buscar transacciones..." id="searchTransactions">
                        </div>
                        <select id="filterTransactions">
                            <option value="all">Todos</option>
                            <option value="income">Ingresos</option>
                            <option value="expense">Gastos</option>
                        </select>
                        <button class="export-btn" onclick="exportTransactions()">
                            <i class="fas fa-download"></i>
                            Exportar
                        </button>
                    </div>
                </div>
                
                <div class="transactions-container">
                    <div class="transactions-table">
                        <div class="table-header">
                            <div class="table-cell">Fecha</div>
                            <div class="table-cell">Descripción</div>
                            <div class="table-cell">Categoría</div>
                            <div class="table-cell">Monto</div>
                            <div class="table-cell">Estado</div>
                        </div>
                        <div class="table-body" id="transactionsBody">
                            <!-- Transactions will be loaded here -->
                        </div>
                    </div>
                    
                    <div class="pagination">
                        <button class="page-btn" id="prevPage" onclick="changePage(-1)">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <span class="page-info" id="pageInfo">Página 1 de 3</span>
                        <button class="page-btn" id="nextPage" onclick="changePage(1)">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Services Section -->
        <section class="services-section" data-aos="fade-up" data-aos-delay="400">
            <div class="container">
                <h2 class="section-title">Servicios Bancarios</h2>
                <div class="services-grid">
                    <div class="service-card" onclick="openServiceModal('investment')">
                        <div class="service-icon">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <h3>Inversiones</h3>
                        <p>Haz crecer tu dinero con nuestros productos de inversión</p>
                        <div class="service-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>
                    
                    <div class="service-card" onclick="openServiceModal('loan')">
                        <div class="service-icon">
                            <i class="fas fa-hand-holding-usd"></i>
                        </div>
                        <h3>Préstamos</h3>
                        <p>Solicita un préstamo personal con tasas preferenciales</p>
                        <div class="service-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>
                    
                    <div class="service-card" onclick="openServiceModal('insurance')">
                        <div class="service-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h3>Seguros</h3>
                        <p>Protege lo que más importa con nuestros seguros</p>
                        <div class="service-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>
                    
                    <div class="service-card" onclick="openServiceModal('support')">
                        <div class="service-icon">
                            <i class="fas fa-headset"></i>
                        </div>
                        <h3>Soporte 24/7</h3>
                        <p>Estamos aquí para ayudarte en cualquier momento</p>
                        <div class="service-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modals -->
    <div id="transferModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Transferir Dinero</h3>
                <button class="modal-close" onclick="closeModal('transferModal')">&times;</button>
            </div>
            <form class="modal-form" onsubmit="processTransfer(event)">
                <div class="form-group">
                    <label>Cuenta origen</label>
                    <select required>
                        <option value="">Seleccionar cuenta</option>
                        <option value="savings">Cuenta de Ahorros - **** 1234</option>
                        <option value="checking">Cuenta Corriente - **** 5678</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Cuenta destino</label>
                    <input type="text" placeholder="Número de cuenta o CLABE" required>
                </div>
                <div class="form-group">
                    <label>Monto</label>
                    <input type="number" placeholder="0.00" min="1" step="0.01" required>
                </div>
                <div class="form-group">
                    <label>Concepto</label>
                    <input type="text" placeholder="Descripción de la transferencia">
                </div>
                <button type="submit" class="btn-primary full-width">
                    <i class="fas fa-paper-plane"></i>
                    Transferir
                </button>
            </form>
        </div>
    </div>

    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Pagar Servicios</h3>
                <button class="modal-close" onclick="closeModal('paymentModal')">&times;</button>
            </div>
            <form class="modal-form" onsubmit="processPayment(event)">
                <div class="form-group">
                    <label>Tipo de servicio</label>
                    <select required>
                        <option value="">Seleccionar servicio</option>
                        <option value="electricity">Luz</option>
                        <option value="water">Agua</option>
                        <option value="gas">Gas</option>
                        <option value="internet">Internet</option>
                        <option value="phone">Teléfono</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Número de servicio</label>
                    <input type="text" placeholder="Ingresa el número de servicio" required>
                </div>
                <div class="form-group">
                    <label>Monto</label>
                    <input type="number" placeholder="0.00" min="1" step="0.01" required>
                </div>
                <button type="submit" class="btn-primary full-width">
                    <i class="fas fa-credit-card"></i>
                    Pagar
                </button>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>GR Bank</h3>
                    <p>Tu banco de confianza desde 1999. Comprometidos con tu futuro financiero y la innovación tecnológica.</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Servicios</h4>
                    <ul>
                        <li><a href="#">Cuentas de Ahorro</a></li>
                        <li><a href="#">Tarjetas de Crédito</a></li>
                        <li><a href="#">Préstamos</a></li>
                        <li><a href="#">Inversiones</a></li>
                        <li><a href="#">Seguros</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Soporte</h4>
                    <ul>
                        <li><a href="#">Centro de Ayuda</a></li>
                        <li><a href="#">Chat en Vivo</a></li>
                        <li><a href="#">Términos y Condiciones</a></li>
                        <li><a href="#">Política de Privacidad</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contacto</h4>
                    <ul>
                        <li><i class="fas fa-phone"></i> 01 800 123 4567</li>
                        <li><i class="fas fa-envelope"></i> soporte@grbank.com</li>
                        <li><i class="fas fa-map-marker-alt"></i> Av. Principal 123, CDMX</li>
                        <li><i class="fas fa-clock"></i> 24/7 Disponible</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 GR Bank. Todos los derechos reservados. | Institución de Banca Múltiple</p>
            </div>
        </div>
    </footer>

    <script type="module" src="js/script_dashboard.js?v=2"></script>
</body>
</html>
